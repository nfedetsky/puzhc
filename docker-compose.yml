version: '3.3'
networks:
  bridge:
    driver: bridge
services:
  suvv-app:
    container_name: suvv-app
    build:
      context: .
      dockerfile: ./Dockerfile
    environment:
      - JDBC_DB_HOST=${JDBC_DB_HOST}
      - JDBC_DB=${JDBC_DB}
      - JDBC_DB_USERNAME=${JDBC_DB_USERNAME}
      - JDBC_DB_PASSWORD=${JDBC_DB_PASSWORD}
      - XWIKI_DB_HOST=${XWIKI_DB_HOST}
      - XWIKI_DB=${XWIKI_DB}
      - XWIKI_DB_USERNAME=${XWIKI_DB_USERNAME}
      - XWIKI_DB_PASSWORD=${XWIKI_DB_PASSWORD}
      - MAIL_HOST=${MAIL_HOST}
      - MAIL_PORT=${MAIL_PORT}
      - MAIL_USERNAME=${MAIL_USERNAME}
      - MAIL_PASSWORD=${MAIL_PASSWORD}
      - MAIL_SMTP_AUTH=${MAIL_SMTP_AUTH}
      - MAIL_SMTP_SSL_ENABLE=${MAIL_SMTP_SSL_ENABLE}
      - MAIL_SMTP_STARTTLS_ENABLE=${MAIL_SMTP_STARTTLS_ENABLE}
      - POIB_SECURITY_ENABLED=${POIB_SECURITY_ENABLED}
      - POIB_CLIENT_AUTH_ID=${POIB_CLIENT_AUTH_ID}
      - POIB_CLIENT_AUTH_SECRET=${POIB_CLIENT_AUTH_SECRET}
      - POIB_CLIENT_SYSTEM_ID=${POIB_CLIENT_SYSTEM_ID}
      - POIB_PROVIDER_ID_URL=${POIB_PROVIDER_ID_URL}
      - POIB_PROVIDER_AUTHZ_URL=${POIB_PROVIDER_AUTHZ_URL}
    ports:
      - "8080:8080"
    volumes:
      - ~/jmix:/.jmix
  suvv-poib-emu:
    container_name: suvv-poib-emu
    image: "softline/suvv-poib-emu:latest"
    ports:
      - "12081:12081"
  suvv-poib-emu-nginx:
    container_name: suvv-poib-emu-nginx
    image: "softline/suvv-poib-emu-nginx:latest"
    environment:
      - SUVV_HOST_IP=${SUVV_HOST_IP}
      - XWIKI_HOST_IP=${XWIKI_HOST_IP}
      - NGINX_HOST=${NGINX_HOST}
      - XWIKI_APP_PATH=${XWIKI_APP_PATH}
    ports:
      - "80:80"
      - "18001:18001"
      - "18002:18002"
      - "18003:18003"
      - "18004:18004"
      - "18005:18005"
      - "18006:18006"
      - "18007:18007"
      - "18008:18008"
      - "18009:18009"
      - "18010:18010"
      - "18011:18011"
      - "18012:18012"
      - "18013:18013"
      - "18014:18014"
      - "18015:18015"
      - "18016:18016"
      - "18017:18017"
      - "18018:18018"
      - "18019:18019"
      - "18020:18020"
      - "18021:18021"
      - "18022:18022"
      - "18023:18023"
      - "18024:18024"
      - "18025:18025"
      - "18026:18026"
      - "18027:18027"
      - "18028:18028"
      - "18029:18029"
      - "18030:18030"
      - "18031:18031"
      - "18032:18032"
      - "18033:18033"
      - "18034:18034"
      - "18035:18035"
      - "18036:18036"
      - "18037:18037"
      - "18038:18038"
      - "18039:18039"
      - "18040:18040"
      - "18041:18041"
      - "18042:18042"
      - "18043:18043"
      - "18044:18044"
      - "18045:18045"
      - "19001:19001"
      - "19002:19002"
      - "19003:19003"
      - "19004:19004"
      - "19005:19005"
      - "19006:19006"
      - "19007:19007"
      - "19008:19008"
      - "19009:19009"
      - "19010:19010"
      - "19011:19011"
      - "19012:19012"
      - "19013:19013"
      - "19014:19014"
      - "19015:19015"
      - "19016:19016"
      - "19017:19017"
      - "19018:19018"
      - "19019:19019"
      - "19020:19020"
      - "19021:19021"
      - "19022:19022"
      - "19023:19023"
      - "19024:19024"
      - "19025:19025"
      - "19026:19026"
      - "19027:19027"
      - "19028:19028"
      - "19029:19029"
      - "19030:19030"
      - "19031:19031"
      - "19032:19032"
      - "19033:19033"
      - "19034:19034"
      - "19035:19035"
      - "19036:19036"
      - "19037:19037"
      - "19038:19038"
      - "19039:19039"
      - "19040:19040"
      - "19041:19041"
      - "19042:19042"
      - "19043:19043"
      - "19044:19044"
      - "19045:19045"